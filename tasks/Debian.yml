---
- name: Install necesary packages
  apt:
    name:
      - binutils
      - make
      - patch
      - dkms
      - dkms
      - gcc

- name: Add virtualbox repo key
  apt_key:
    url: https://www.virtualbox.org/download/oracle_vbox_2016.asc
    state: present

- name: VirtualBox Install
  block:
    - name: Instalar repo virtualbox
      apt_repository:
        repo: {{ virtualbox_apt_repo_url }}
        state: present

    - name: "Install VirtualBox"
      apt:
        name:
          - virtualbox-6.1
        state: present
        update_cache: yes

    - name: adding existing user to group
      user:
        name: "{{ user }}"
        groups: vboxusers
        append: yes

    - name: VBOX setup script
      shell: /usr/lib/virtualbox/vboxdrv.sh setup

  when: vbox|bool == True

- name: Install basic applications
  apt:
    name:
      - git
      - zsh
      - wget
      - curl
      - snapd
      - vim
      - vagrant
      # - vlc
      - gnome-tweak-tool
      - terminator
    state: present
    update_cache: yes

- name: Install Numix theme
  apt:
    name:
      - numix-icon-theme
      - numix-icon-theme-circle
    state: present
    update_cache: yes

    #- name: Install Chrome
    #apt:
    #name:  https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
    #state: present

    #- name: Install atom
    #apt:
    #name: https://atom-installer.github.com/v1.42.0/atom-amd64.deb?s=1576347951&ext=.deb
    #state: present
